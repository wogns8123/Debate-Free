<template>
    <div class="p-8">
        <h1 class="text-4xl font-bold mb-6">ğŸŒ ëœë¤ í† ë¡  ì‚¬ì´íŠ¸</h1>

        <button
            @click="showModal = true"
            class="mb-8 px-6 py-3 bg-purple-600 text-white rounded-xl"
        >
            ëœë¤ ì±„íŒ…ë°© ë§Œë“¤ê¸°
        </button>

        <!-- ChatRoomListë¡œ ë°© ëª©ë¡ ì¶œë ¥ -->
        <ChatRoomList :rooms="rooms" @room-selected="goToRoom" />

        <CreateRoomModal v-if="showModal" @close="showModal = false" @create="createRoom" />
    </div>
</template>

<script lang="ts">
import { defineComponent, ref } from 'vue';
import ChatRoomList from '../components/ChatRoomList.vue';
import CreateRoomModal from '../components/CreateRoomModal.vue';

export default defineComponent({
    components: { ChatRoomList, CreateRoomModal },
    setup() {
        const rooms = ref([
            { id: 1, name: 'í™˜ê²½ ë³´í˜¸', theme: 'í™˜ê²½' },
            { id: 2, name: 'AI ê¸°ìˆ ', theme: 'ê¸°ìˆ ' },
            { id: 3, name: 'ì˜í™” í† ë¡ ', theme: 'ë¬¸í™”' },
        ]);

        const showModal = ref(false);

        const createRoom = (newRoom: any) => rooms.value.push(newRoom);
        const goToRoom = (id: number) => (window.location.href = `/room/${id}`);

        return { rooms, showModal, createRoom, goToRoom };
    },
});
</script>
